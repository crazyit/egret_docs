(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{210:function(e,t,b){"use strict";b.r(t),b.d(t,"frontMatter",(function(){return c})),b.d(t,"rightToc",(function(){return l})),b.d(t,"metadata",(function(){return i})),b.d(t,"default",(function(){return O}));var a=b(1),r=b(9),n=(b(0),b(520)),c={id:"egret.WebSocket"},l=[{value:"\u516c\u5171\u5c5e\u6027",id:"\u516c\u5171\u5c5e\u6027",children:[]},{value:"\u516c\u5171\u65b9\u6cd5",id:"\u516c\u5171\u65b9\u6cd5",children:[]},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6",children:[{value:"\u5c5e\u6027\u8be6\u7ec6\u4fe1\u606f",id:"\u5c5e\u6027\u8be6\u7ec6\u4fe1\u606f",children:[]},{value:"TYPE_BINARY",id:"type_binary",children:[]},{value:"TYPE_STRING",id:"type_string",children:[]},{value:"connected",id:"connected",children:[]},{value:"type",id:"type",children:[]}]},{value:"\u65b9\u6cd5\u8be6\u7ec6\u4fe1\u606f",id:"\u65b9\u6cd5\u8be6\u7ec6\u4fe1\u606f",children:[{value:"WebSocket()",id:"websocket",children:[]},{value:"close()",id:"close",children:[]},{value:"connect()",id:"connect",children:[]},{value:"connectByUrl()",id:"connectbyurl",children:[]},{value:"flush()",id:"flush",children:[]},{value:"readBytes()",id:"readbytes",children:[]},{value:"readUTF()",id:"readutf",children:[]},{value:"writeBytes()",id:"writebytes",children:[]},{value:"writeUTF()",id:"writeutf",children:[]},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",children:[]}]}],i={id:"api/socket/egret.WebSocket",title:"egret.WebSocket",description:"**\u5305** \xa0\xa0 egret",source:"@site/docs/api/socket/egret.WebSocket.md",permalink:"/engine/docs/api/socket/egret.WebSocket",sidebar:"apiSidebar",previous:{title:"global.Types",permalink:"/engine/docs/api/tween/global.Types"},next:{title:"global.Types",permalink:"/engine/docs/api/socket/global.Types"}},p={rightToc:l,metadata:i},o="wrapper";function O(e){var t=e.components,b=Object(r.a)(e,["components"]);return Object(n.b)(o,Object(a.a)({},p,b,{components:t,mdxType:"MDXLayout"}),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"\u5305")," \xa0\xa0 egret"),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"\u7c7b"),"  \xa0\xa0 public class WebSocket"),Object(n.b)("p",null,Object(n.b)("strong",{parentName:"p"},"\u7ee7\u627f")," \xa0\xa0 egret.WebSocket \u2192 ",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.EventDispatcher"}),"egret.EventDispatcher")," \u2192 ",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.HashObject"}),"egret.HashObject")),Object(n.b)("p",null,"egret.WebSocket \u7c7b\u542f\u7528\u4ee3\u7801\u4ee5\u5efa\u7acb\u4f20\u8f93\u63a7\u5236\u534f\u8bae (TCP) \u5957\u63a5\u5b57\u8fde\u63a5\uff0c\u7528\u4e8e\u53d1\u9001\u548c\u63a5\u6536\u5b57\u7b26\u4e32\u6216\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u8981\u4f7f\u7528 egret.WebSocket \u7c7b\u7684\u65b9\u6cd5\uff0c\u8bf7\u5148\u4f7f\u7528\u6784\u9020\u51fd\u6570 new egret.WebSocket \u521b\u5efa\u4e00\u4e2a egret.WebSocket \u5bf9\u8c61\u3002\u5957\u63a5\u5b57\u4ee5\u5f02\u6b65\u65b9\u5f0f\u4f20\u8f93\u548c\u63a5\u6536\u6570\u636e\u3002"),Object(n.b)("h2",{id:"\u516c\u5171\u5c5e\u6027"},"\u516c\u5171\u5c5e\u6027"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u5c5e\u6027"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#type_binary"}),"TYPE_BINARY")," : ",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),Object(n.b)("br",null),"[\u9759\u6001]","\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#type_string"}),"TYPE_STRING")," : ",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),Object(n.b)("br",null),"[\u9759\u6001]","\u4ee5\u5b57\u7b26\u4e32\u683c\u5f0f\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#connected"}),"connected")," : ",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#boolean"}),"boolean"),Object(n.b)("br",null),"\u8868\u793a\u6b64 Socket \u5bf9\u8c61\u76ee\u524d\u662f\u5426\u5df2\u8fde\u63a5")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#type"}),"type")," : ",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),Object(n.b)("br",null),"\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u662f\u5b57\u7b26\u4e32\u683c\u5f0f")))),Object(n.b)("h2",{id:"\u516c\u5171\u65b9\u6cd5"},"\u516c\u5171\u65b9\u6cd5"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"\u65b9\u6cd5"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#websocket"}),"WebSocket"),"(host:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),",port:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#number"}),"number"),")",Object(n.b)("br",null),"\u521b\u5efa\u4e00\u4e2a egret.WebSocket \u5bf9\u8c61\u53c2\u6570\u4e3a\u9884\u7559\u53c2\u6570\uff0c\u73b0\u7248\u672c\u6682\u4e0d\u5904\u7406\uff0c\u8fde\u63a5\u5730\u5740\u548c\u7aef\u53e3\u53f7\u5728 connect \u51fd\u6570\u4e2d\u4f20\u5165")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#close"}),"close"),"():",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#void"}),"void"),Object(n.b)("br",null),"\u5173\u95ed\u5957\u63a5\u5b57")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#connect"}),"connect"),"(host:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),",port:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#number"}),"number"),"):",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#void"}),"void"),Object(n.b)("br",null),"\u5c06\u5957\u63a5\u5b57\u8fde\u63a5\u5230\u6307\u5b9a\u7684\u4e3b\u673a\u548c\u7aef\u53e3")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#connectbyurl"}),"connectByUrl"),"(url:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),"):",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#void"}),"void"),Object(n.b)("br",null),"\u6839\u636e\u63d0\u4f9b\u7684url\u8fde\u63a5")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#flush"}),"flush"),"():",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#void"}),"void"),Object(n.b)("br",null),"\u5bf9\u5957\u63a5\u5b57\u8f93\u51fa\u7f13\u51b2\u533a\u4e2d\u79ef\u7d2f\u7684\u6240\u6709\u6570\u636e\u8fdb\u884c\u5237\u65b0")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#readbytes"}),"readBytes"),"(bytes:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.ByteArray"}),"egret.ByteArray"),",offset:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#number"}),"number"),",length:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#number"}),"number"),"):",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#void"}),"void"),Object(n.b)("br",null),"\u4ece\u5957\u63a5\u5b57\u8bfb\u53d6 length \u53c2\u6570\u6307\u5b9a\u7684\u6570\u636e\u5b57\u8282\u6570")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#readutf"}),"readUTF"),"():",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),Object(n.b)("br",null),"\u4ece\u5957\u63a5\u5b57\u8bfb\u53d6\u4e00\u4e2a UTF-8 \u5b57\u7b26\u4e32")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#writebytes"}),"writeBytes"),"(bytes:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.ByteArray"}),"egret.ByteArray"),",offset:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#number"}),"number"),",length:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#number"}),"number"),"):",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#void"}),"void"),Object(n.b)("br",null),"\u4ece\u6307\u5b9a\u7684\u5b57\u8282\u6570\u7ec4\u5199\u5165\u4e00\u7cfb\u5217\u5b57\u8282")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"#writeutf"}),"writeUTF"),"(message:",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#string"}),"string"),"):",Object(n.b)("a",Object(a.a)({parentName:"td"},{href:"global.Types#void"}),"void"),Object(n.b)("br",null),"\u5c06\u5b57\u7b26\u4e32\u6570\u636e\u5199\u5165\u5957\u63a5\u5b57")))),Object(n.b)("h2",{id:"\u4e8b\u4ef6"},"\u4e8b\u4ef6"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Events"))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"egret.Event.CONNECT",Object(n.b)("br",null),"\u8fde\u63a5\u670d\u52a1\u5668\u6210\u529f\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"egret.ProgressEvent.SOCKET_DATA",Object(n.b)("br",null),"\u63a5\u6536\u670d\u52a1\u5668\u6570\u636e\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"egret.Event.CLOSE",Object(n.b)("br",null),"\u5728\u670d\u52a1\u5668\u5173\u95ed\u8fde\u63a5\u65f6\u8c03\u5ea6\u3002")),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"egret.IOErrorEvent.IO_ERROR",Object(n.b)("br",null),"\u5728\u51fa\u73b0\u8f93\u5165/\u8f93\u51fa\u9519\u8bef\u5e76\u5bfc\u81f4\u53d1\u9001\u6216\u52a0\u8f7d\u64cd\u4f5c\u5931\u8d25\u65f6\u8c03\u5ea6\u3002\u3002")))),Object(n.b)("h3",{id:"\u5c5e\u6027\u8be6\u7ec6\u4fe1\u606f"},"\u5c5e\u6027\u8be6\u7ec6\u4fe1\u606f"),Object(n.b)("h3",{id:"type_binary"},"TYPE_BINARY"),Object(n.b)("p",null,"TYPE_BINARY : ",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string"),' = "webSocketTypeBinary"'),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native")),Object(n.b)("p",null,"\u4ee5\u4e8c\u8fdb\u5236\u683c\u5f0f\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e"),Object(n.b)("h3",{id:"type_string"},"TYPE_STRING"),Object(n.b)("p",null,"TYPE_STRING : ",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string"),' = "webSocketTypeString"'),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native")),Object(n.b)("p",null,"\u4ee5\u5b57\u7b26\u4e32\u683c\u5f0f\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e"),Object(n.b)("h3",{id:"connected"},"connected"),Object(n.b)("p",null,"connected : ",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#boolean"}),"boolean")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native")),Object(n.b)("p",null,"\u8868\u793a\u6b64 Socket \u5bf9\u8c61\u76ee\u524d\u662f\u5426\u5df2\u8fde\u63a5"),Object(n.b)("h3",{id:"type"},"type"),Object(n.b)("p",null,"type : ",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native")),Object(n.b)("p",null,"\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u662f\u5b57\u7b26\u4e32\u683c\u5f0f"),Object(n.b)("h2",{id:"\u65b9\u6cd5\u8be6\u7ec6\u4fe1\u606f"},"\u65b9\u6cd5\u8be6\u7ec6\u4fe1\u606f"),Object(n.b)("h3",{id:"websocket"},"WebSocket()"),Object(n.b)("p",null,"public WebSocket(host:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string"),",port:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#number"}),"number"),")"),Object(n.b)("p",null,"\u521b\u5efa\u4e00\u4e2a egret.WebSocket \u5bf9\u8c61\u53c2\u6570\u4e3a\u9884\u7559\u53c2\u6570\uff0c\u73b0\u7248\u672c\u6682\u4e0d\u5904\u7406\uff0c\u8fde\u63a5\u5730\u5740\u548c\u7aef\u53e3\u53f7\u5728 connect \u51fd\u6570\u4e2d\u4f20\u5165"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u53c2\u6570"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"host:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#string"}),"string")),Object(n.b)("li",{parentName:"ul"},"port:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#number"}),"number"))))),Object(n.b)("h3",{id:"close"},"close()"),Object(n.b)("p",null,"public close():",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#void"}),"void")),Object(n.b)("p",null,"\u5173\u95ed\u5957\u63a5\u5b57"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native")),Object(n.b)("h3",{id:"connect"},"connect()"),Object(n.b)("p",null,"public connect(host:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string"),",port:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#number"}),"number"),"):",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#void"}),"void")),Object(n.b)("p",null,"\u5c06\u5957\u63a5\u5b57\u8fde\u63a5\u5230\u6307\u5b9a\u7684\u4e3b\u673a\u548c\u7aef\u53e3"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u53c2\u6570"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"host:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#string"}),"string")," - \u8981\u8fde\u63a5\u5230\u7684\u4e3b\u673a\u7684\u540d\u79f0\u6216 IP \u5730\u5740"),Object(n.b)("li",{parentName:"ul"},"port:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#number"}),"number")," - \u8981\u8fde\u63a5\u5230\u7684\u7aef\u53e3\u53f7")))),Object(n.b)("h3",{id:"connectbyurl"},"connectByUrl()"),Object(n.b)("p",null,"public connectByUrl(url:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string"),"):",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#void"}),"void")),Object(n.b)("p",null,"\u6839\u636e\u63d0\u4f9b\u7684url\u8fde\u63a5"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"all"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u53c2\u6570"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"url:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#string"}),"string")," - \u5168\u5730\u5740\u3002\u5982ws://echo.websocket.org:80")))),Object(n.b)("h3",{id:"flush"},"flush()"),Object(n.b)("p",null,"public flush():",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#void"}),"void")),Object(n.b)("p",null,"\u5bf9\u5957\u63a5\u5b57\u8f93\u51fa\u7f13\u51b2\u533a\u4e2d\u79ef\u7d2f\u7684\u6240\u6709\u6570\u636e\u8fdb\u884c\u5237\u65b0"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native")),Object(n.b)("h3",{id:"readbytes"},"readBytes()"),Object(n.b)("p",null,"public readBytes(bytes:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.ByteArray"}),"egret.ByteArray"),",offset:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#number"}),"number"),",length:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#number"}),"number"),"):",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#void"}),"void")),Object(n.b)("p",null,"\u4ece\u5957\u63a5\u5b57\u8bfb\u53d6 length \u53c2\u6570\u6307\u5b9a\u7684\u6570\u636e\u5b57\u8282\u6570\u3002\u4ece offset \u6240\u8868\u793a\u7684\u4f4d\u7f6e\u5f00\u59cb\uff0c\u5c06\u8fd9\u4e9b\u5b57\u8282\u8bfb\u5165\u6307\u5b9a\u7684\u5b57\u8282\u6570\u7ec4"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u53c2\u6570"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"bytes:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.ByteArray"}),"egret.ByteArray")," - \u8981\u5c06\u6570\u636e\u8bfb\u5165\u7684 ByteArray \u5bf9\u8c61"),Object(n.b)("li",{parentName:"ul"},"offset:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#number"}),"number")," - \u6570\u636e\u8bfb\u53d6\u7684\u504f\u79fb\u91cf\u5e94\u4ece\u8be5\u5b57\u8282\u6570\u7ec4\u4e2d\u5f00\u59cb"),Object(n.b)("li",{parentName:"ul"},"length:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#number"}),"number")," - \u8981\u8bfb\u53d6\u7684\u5b57\u8282\u6570\u3002\u9ed8\u8ba4\u503c 0 \u5bfc\u81f4\u8bfb\u53d6\u6240\u6709\u53ef\u7528\u7684\u6570\u636e")))),Object(n.b)("h3",{id:"readutf"},"readUTF()"),Object(n.b)("p",null,"public readUTF():",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string")),Object(n.b)("p",null,"\u4ece\u5957\u63a5\u5b57\u8bfb\u53d6\u4e00\u4e2a UTF-8 \u5b57\u7b26\u4e32"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native")),Object(n.b)("h3",{id:"writebytes"},"writeBytes()"),Object(n.b)("p",null,"public writeBytes(bytes:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.ByteArray"}),"egret.ByteArray"),",offset:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#number"}),"number"),",length:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#number"}),"number"),"):",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#void"}),"void")),Object(n.b)("p",null,"\u4ece\u6307\u5b9a\u7684\u5b57\u8282\u6570\u7ec4\u5199\u5165\u4e00\u7cfb\u5217\u5b57\u8282\u3002\u5199\u5165\u64cd\u4f5c\u4ece offset \u6307\u5b9a\u7684\u4f4d\u7f6e\u5f00\u59cb\u3002\u5982\u679c\u7701\u7565\u4e86 length \u53c2\u6570\uff0c\u5219\u9ed8\u8ba4\u957f\u5ea6 0 \u5c06\u5bfc\u81f4\u8be5\u65b9\u6cd5\u4ece offset \u5f00\u59cb\u5199\u5165\u6574\u4e2a\u7f13\u51b2\u533a\u3002\u5982\u679c\u8fd8\u7701\u7565\u4e86 offset \u53c2\u6570\uff0c\u5219\u5199\u5165\u6574\u4e2a\u7f13\u51b2\u533a\u3002"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u53c2\u6570"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"bytes:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.egret.com/engine/docs/api/engine/egret.ByteArray"}),"egret.ByteArray")," - \u8981\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u7684 ByteArray \u5bf9\u8c61"),Object(n.b)("li",{parentName:"ul"},"offset:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#number"}),"number")," - ByteArray \u5bf9\u8c61\u4e2d\u4ece\u96f6\u5f00\u59cb\u7684\u504f\u79fb\u91cf\uff0c\u5e94\u7531\u6b64\u5f00\u59cb\u6267\u884c\u6570\u636e\u5199\u5165"),Object(n.b)("li",{parentName:"ul"},"length:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#number"}),"number")," - \u8981\u5199\u5165\u7684\u5b57\u8282\u6570\u3002\u9ed8\u8ba4\u503c 0 \u5bfc\u81f4\u4ece offset \u53c2\u6570\u6307\u5b9a\u7684\u503c\u5f00\u59cb\u5199\u5165\u6574\u4e2a\u7f13\u51b2\u533a")))),Object(n.b)("h3",{id:"writeutf"},"writeUTF()"),Object(n.b)("p",null,"public writeUTF(message:",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#string"}),"string"),"):",Object(n.b)("a",Object(a.a)({parentName:"p"},{href:"global.Types#void"}),"void")),Object(n.b)("p",null,"\u5c06\u5b57\u7b26\u4e32\u6570\u636e\u5199\u5165\u5957\u63a5\u5b57"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u652f\u6301\u7248\u672c:"),"Egret 2.4"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u8fd0\u884c\u5e73\u53f0"),":Web,Native"),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"\u53c2\u6570"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"message:",Object(n.b)("a",Object(a.a)({parentName:"li"},{href:"global.Types#string"}),"string")," - \u8981\u5199\u5165\u5957\u63a5\u5b57\u7684\u5b57\u7b26\u4e32")))),Object(n.b)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(n.b)("pre",null,Object(n.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'/**\n * \u4e0b\u9762\u7684\u793a\u4f8b\u4f7f\u7528 WebSocketExample \u7c7b\u521b\u5efa\u65b0 WebSocket \u5bf9\u8c61\uff0c\u7136\u540e\u4e0e\u670d\u52a1\u5668\u901a\u8baf\u3002\n */\nclass WebSocketExample extends egret.DisplayObjectContainer {\n    public constructor() {\n        super();\n        this.initStateText();\n        this.initWebSocket();\n    }\n    private stateText: egret.TextField;\n    private text: string = "TestWebSocket";\n    private initStateText(): void {\n        this.stateText = new egret.TextField();\n        this.stateText.size = 22;\n        this.stateText.text = this.text;\n        this.stateText.width = 480;\n        this.addChild(this.stateText);\n    }\n    private socket: egret.WebSocket;\n    private initWebSocket(): void {\n        //\u521b\u5efa WebSocket \u5bf9\u8c61\n        this.socket = new egret.WebSocket();\n        //\u8bbe\u7f6e\u6570\u636e\u683c\u5f0f\u4e3a\u4e8c\u8fdb\u5236\uff0c\u9ed8\u8ba4\u4e3a\u5b57\u7b26\u4e32\n        this.socket.type = egret.WebSocket.TYPE_BINARY;\n        //\u6dfb\u52a0\u6536\u5230\u6570\u636e\u4fa6\u542c\uff0c\u6536\u5230\u6570\u636e\u4f1a\u8c03\u7528\u6b64\u65b9\u6cd5\n        this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA, this.onReceiveMessage, this);\n        //\u6dfb\u52a0\u94fe\u63a5\u6253\u5f00\u4fa6\u542c\uff0c\u8fde\u63a5\u6210\u529f\u4f1a\u8c03\u7528\u6b64\u65b9\u6cd5\n        this.socket.addEventListener(egret.Event.CONNECT, this.onSocketOpen, this);\n        //\u6dfb\u52a0\u94fe\u63a5\u5173\u95ed\u4fa6\u542c\uff0c\u624b\u52a8\u5173\u95ed\u6216\u8005\u670d\u52a1\u5668\u5173\u95ed\u8fde\u63a5\u4f1a\u8c03\u7528\u6b64\u65b9\u6cd5\n        this.socket.addEventListener(egret.Event.CLOSE, this.onSocketClose, this);\n        //\u6dfb\u52a0\u5f02\u5e38\u4fa6\u542c\uff0c\u51fa\u73b0\u5f02\u5e38\u4f1a\u8c03\u7528\u6b64\u65b9\u6cd5\n        this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR, this.onSocketError, this);\n        //\u8fde\u63a5\u670d\u52a1\u5668\n        this.socket.connect("echo.websocket.org", 80);\n    }\n    private sendData(): void {\n        //\u521b\u5efa ByteArray \u5bf9\u8c61\n        const byte: egret.ByteArray = new egret.ByteArray();\n        //\u5199\u5165\u5b57\u7b26\u4e32\u4fe1\u606f\n        byte.writeUTF("Hello Egret WebSocket");\n        //\u5199\u5165\u5e03\u5c14\u503c\u4fe1\u606f\n        byte.writeBoolean(false);\n        //\u5199\u5165int\u503c\u4fe1\u606f\n        byte.writeInt(123);\n        byte.position = 0;\n        //\u53d1\u9001\u6570\u636e\n        this.socket.writeBytes(byte, 0, byte.bytesAvailable);\n    }\n    private onSocketOpen(): void {\n        this.trace("WebSocketOpen");\n        this.sendData();\n    }\n    private onSocketClose(): void {\n        this.trace("WebSocketClose");\n    }\n    private onSocketError(): void {\n        this.trace("WebSocketError");\n    }\n    private onReceiveMessage(e: egret.Event): void {\n        //\u521b\u5efa ByteArray \u5bf9\u8c61\n        const byte: egret.ByteArray = new egret.ByteArray();\n        //\u8bfb\u53d6\u6570\u636e\n        this.socket.readBytes(byte);\n        //\u8bfb\u53d6\u5b57\u7b26\u4e32\u4fe1\u606f\n        const msg: string = byte.readUTF();\n        //\u8bfb\u53d6\u5e03\u5c14\u503c\u4fe1\u606f\n        const boo: boolean = byte.readBoolean();\n        //\u8bfb\u53d6int\u503c\u4fe1\u606f\n        const num: number = byte.readInt();\n        this.trace("\u6536\u5230\u6570\u636e:");\n        this.trace("readUTF : " + msg);\n        this.trace("readBoolean : " + boo.toString());\n        this.trace("readInt : " + num.toString());\n    }\n    private trace(msg: any): void {\n        this.text = this.text + "\\n" + msg;\n        this.stateText.text = this.text;\n        egret.log(msg);\n    }\n}\n\n')))}O.isMDXComponent=!0},520:function(e,t,b){"use strict";b.d(t,"a",(function(){return O})),b.d(t,"b",(function(){return m}));var a=b(0),r=b.n(a);function n(e,t,b){return t in e?Object.defineProperty(e,t,{value:b,enumerable:!0,configurable:!0,writable:!0}):e[t]=b,e}function c(e,t){var b=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),b.push.apply(b,a)}return b}function l(e){for(var t=1;t<arguments.length;t++){var b=null!=arguments[t]?arguments[t]:{};t%2?c(Object(b),!0).forEach((function(t){n(e,t,b[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(b)):c(Object(b)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(b,t))}))}return e}function i(e,t){if(null==e)return{};var b,a,r=function(e,t){if(null==e)return{};var b,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)b=n[a],t.indexOf(b)>=0||(r[b]=e[b]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)b=n[a],t.indexOf(b)>=0||Object.prototype.propertyIsEnumerable.call(e,b)&&(r[b]=e[b])}return r}var p=r.a.createContext({}),o=function(e){var t=r.a.useContext(p),b=t;return e&&(b="function"==typeof e?e(t):l({},t,{},e)),b},O=function(e){var t=o(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},j="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=Object(a.forwardRef)((function(e,t){var b=e.components,a=e.mdxType,n=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),O=o(b),j=a,u=O["".concat(c,".").concat(j)]||O[j]||s[j]||n;return b?r.a.createElement(u,l({ref:t},p,{components:b})):r.a.createElement(u,l({ref:t},p))}));function m(e,t){var b=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=b.length,c=new Array(n);c[0]=u;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[j]="string"==typeof e?e:a,c[1]=l;for(var p=2;p<n;p++)c[p]=b[p];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,b)}u.displayName="MDXCreateElement"}}]);