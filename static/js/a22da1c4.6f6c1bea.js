(window.webpackJsonp=window.webpackJsonp||[]).push([[257],{384:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return p})),n.d(t,"rightToc",(function(){return c})),n.d(t,"metadata",(function(){return o})),n.d(t,"default",(function(){return s}));var a=n(1),r=n(9),i=(n(0),n(520)),p={id:"jszip",uuid:"c6658a3d-97a8-4897-9213-91a0b84101b7",title:"JSZip \u5e93"},c=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",children:[]},{value:"\u5f15\u5165",id:"\u5f15\u5165",children:[]},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",children:[{value:"\u8bfb\u53d6zip\u6587\u4ef6",id:"\u8bfb\u53d6zip\u6587\u4ef6",children:[]},{value:"\u52a0\u8f7djson",id:"\u52a0\u8f7djson",children:[]},{value:"\u751f\u6210zip\u6587\u4ef6",id:"\u751f\u6210zip\u6587\u4ef6",children:[]}]},{value:"\u5176\u4ed6",id:"\u5176\u4ed6",children:[]}],o={id:"extension/jszip/jszip",title:"JSZip \u5e93",description:"# JSZip\u5e93",source:"@site/docs/extension/jszip/jszip.md",permalink:"/engine/docs/extension/jszip/jszip",sidebar:"someSidebar",previous:{title:"\u9f20\u6807\u652f\u6301\u5e93",permalink:"/engine/docs/extension/mouse/mouse"},next:{title:"\u8c03\u8bd5",permalink:"/engine/docs/debug/debug"}},l={rightToc:c,metadata:o},b="wrapper";function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)(b,Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"jszip\u5e93"},"JSZip\u5e93"),Object(i.b)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"JSZip")," \u662f\u4e00\u4e2aJavaScript\u5e93\uff0c\u7528\u6765\u521b\u5efa\uff0c\u9605\u8bfb\u548c\u7f16\u8f91 .zip \u6587\u4ef6\u3002"),Object(i.b)("p",null,"\u6211\u4eec\u5df2\u7ecf\u5c06 ",Object(i.b)("inlineCode",{parentName:"p"},"JSZip")," \u5236\u4f5c\u6210 Egret \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7684\u7b2c\u4e09\u65b9\u5e93\u548c\u793a\u4f8b\uff0c\u53ef\u5728 ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/egret-labs/egret-game-library/tree/master/jszip"}),"github\u4e0b\u8f7d"),"\u3002"),Object(i.b)("h2",{id:"\u5f15\u5165"},"\u5f15\u5165"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"\u5f15\u5165 ",Object(i.b)("inlineCode",{parentName:"li"},"JSZip")," \u652f\u6301\u5e93\u4e0e\u5f15\u5165\u5176\u4ed6\u7b2c\u4e09\u65b9\u5e93\u8fc7\u7a0b\u76f8\u540c\uff0c\u9996\u5148\u4e0b\u8f7d\u8be5\u5e93\uff0c\u5728 egretProperties.json \u4e2d\u5f15\u5165\u8be5\u5e93\u5e76\u7f16\u8bd1\u5f15\u64ce\u3002")),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"\u6253\u5f00\u5e76\u7f16\u8f91",Object(i.b)("inlineCode",{parentName:"p"},"egretProperties.json")," \u6587\u4ef6\uff1a"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "name": "jszip",// \u7b2c\u4e09\u65b9\u5e93\u540d\n    "path": "../libsrc"// \u7b2c\u4e09\u65b9\u5e93\u8def\u5f84   \n}\n'))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},Object(i.b)("inlineCode",{parentName:"p"},"egret build -e ")," \u7f16\u8bd1\u5f15\u64ce\u3002"))),Object(i.b)("h2",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),Object(i.b)("p",null,"\u5728 Egret \u9879\u76ee\u4e2d\uff0c\u53d1\u5e03\u7684\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528 ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.egret.com/engine/docs/cmdExtensionPlugin/api"}),"\u538b\u7f29\u63d2\u4ef6")," \u5c06\u8d44\u6e90\uff08\u56fe\u7247\uff0c\u914d\u7f6e\u6587\u4ef6\u7b49\uff09\u538b\u7f29\u6210\u4e00\u4e2a .zip \u6587\u4ef6\uff0c\u7136\u540e\u4f7f\u7528JSZip\u8bfb\u53d6 .zip \u6587\u4ef6\u7684\u5185\u5bb9\u3002"),Object(i.b)("h3",{id:"\u8bfb\u53d6zip\u6587\u4ef6"},"\u8bfb\u53d6zip\u6587\u4ef6"),Object(i.b)("p",null,"\u9996\u5148\u5c06 .zip \u6587\u4ef6\u914d\u7f6e\u5230default.res.json\u4e2d\uff0c\u4fbf\u4e8e\u540e\u9762\u8bfb\u53d6\u4f7f\u7528\u3002"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'// \u4f7f\u7528res\u83b7\u53d6\u5230zip\u6587\u4ef6\nRES.getResAsync("xx_zip").then((data) => {\n    // \u89e3\u538b\uff0c\u8bfb\u53d6\n    JSZip.loadAsync(data);\n    //  do something ...\n});\n\n')),Object(i.b)("h3",{id:"\u52a0\u8f7djson"},"\u52a0\u8f7djson"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'RES.getResAsync("json_zip").then((data) => {\n    // \u89e3\u538b\uff0c\u8bfb\u53d6\n    JSZip.loadAsync(data).then((zipdata) => {\n        return zipdata.file("xxx.json").async("text");\n    }).then(text => {\n        let jsonData = JSON.parse(text);\n        console.log(jsonData);\n    });\n});\n\n')),Object(i.b)("p",null,"#","##\u52a0\u8f7d\u56fe\u7247"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'RES.getResAsync("img_zip").then((data) => {\n    // \u89e3\u538b\uff0c\u8bfb\u53d6\n    JSZip.loadAsync(data).then((zipdata) => {\n        // \u628a\u6570\u636e\u89e3\u6790\u4e3abase64\n        return zipdata.file("img/xxx.jpg").async("base64");\n    }).then(base64 => {\n        base64 = "data:image/png;base64," + base64;\n        const img: eui.Image = new eui.Image();\n        img.source = base64;\n        this.addChild(img);\n    });\n});\n\n')),Object(i.b)("h3",{id:"\u751f\u6210zip\u6587\u4ef6"},"\u751f\u6210zip\u6587\u4ef6"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'const zip = new JSZip();\nzip.file("Hello.txt", "Hello World\\n");\n// \u521b\u5efaimages\u6587\u4ef6\u5939\nconst img = zip.folder("images");\n// \u4e8c\u8fdb\u5236\u6570\u636e\nconst imgData = "R0lGODdhBQAFAIACAAAAAP/eACwAAAAABQAFAAACCIwPkWerClIBADs=";\nimg.file("smile.gif", imgData, { base64: true });\nzip.generateAsync({ type: "blob" }).then((blob) => {\n    saveAs(blob, "example.zip");\n});\n\n')),Object(i.b)("h2",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),Object(i.b)("p",null,"\u672c\u6587\u4ecb\u7ecdJSZip\u57fa\u672c\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u5982\u679c\u5f00\u53d1\u8005\u60f3\u6df1\u5165\u4e86\u89e3\uff0c\u53ef\u4ee5\u9605\u8bfb",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://stuk.github.io/jszip/documentation/api_jszip.html"}),"\u6587\u6863"),"\u3002"))}s.isMDXComponent=!0},520:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),b=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},s=function(e){var t=b(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},j=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),s=b(n),u=a,j=s["".concat(p,".").concat(u)]||s[u]||d[u]||i;return n?r.a.createElement(j,c({ref:t},l,{components:n})):r.a.createElement(j,c({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,p=new Array(i);p[0]=j;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c[u]="string"==typeof e?e:a,p[1]=c;for(var l=2;l<i;l++)p[l]=n[l];return r.a.createElement.apply(null,p)}return r.a.createElement.apply(null,n)}j.displayName="MDXCreateElement"}}]);